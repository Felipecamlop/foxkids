<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fkids - O Portal da Nostalgia</title>
    <!-- CSS Dependencies -->
    <link href="https://vjs.zencdn.net/7.14.3/video-js.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;700&display=swap');

        :root {
            --fk-blue: #002d72;
            --fk-yellow: #fdb913;
            --fk-red: #ed1c24;
            --fk-dark: #0a0a0a;
        }

        body {
            background-color: var(--fk-dark);
            background-image: radial-gradient(circle at 50% 50%, #1a3a6e 0%, #0a0a0a 100%);
            color: white;
            font-family: 'Roboto', sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .font-brand { font-family: 'Orbitron', sans-serif; }

        /* Logo e Efeitos */
        .logo-container { perspective: 1000px; }
        .logo-main {
            transition: transform 0.3s ease-out;
            filter: drop-shadow(0 0 15px rgba(253, 185, 19, 0.4));
        }

        /* Glassmorphism */
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .video-js {
            width: 100% !important;
            height: auto !important;
            aspect-ratio: 16/9;
            border-radius: 16px;
            overflow: hidden;
            border: 4px solid var(--fk-yellow);
        }

        /* Botões de Navegação */
        .nav-btn {
            background: var(--fk-yellow);
            color: black;
            font-weight: 900;
            padding: 10px 20px;
            border-radius: 12px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }

        .nav-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(253, 185, 19, 0.3);
            background: white;
        }

        .nav-btn.active { background: var(--fk-red); color: white; }
        .nav-btn img { width: 20px; height: 20px; filter: invert(1); }

        /* Relógio Digital */
        .digital-clock-container {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(253, 185, 19, 0.2);
            padding: 8px 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }
        .digital-clock-container:hover {
            border-color: rgba(253, 185, 19, 0.6);
            box-shadow: 0 0 15px rgba(253, 185, 19, 0.2);
        }
        .clock-time {
            color: var(--fk-yellow);
            font-size: 1.5rem;
            line-height: 1;
            text-shadow: 0 0 8px rgba(253, 185, 19, 0.5);
            letter-spacing: 2px;
        }
        .clock-seconds {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            margin-top: 4px;
        }
        .blink-colon {
            animation: blink 1s infinite;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.2; } }

        /* Tabs de Programação */
        .day-tab {
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.75rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .day-tab.active {
            background: var(--fk-yellow);
            color: black;
            font-weight: bold;
        }

        /* Tabela de Programação */
        .schedule-row {
            display: grid;
            grid-template-columns: 80px 1fr;
            padding: 12px 16px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            transition: background 0.2s;
        }
        .schedule-row:hover { background: rgba(253, 185, 19, 0.05); }
        .schedule-time { font-family: 'Orbitron', sans-serif; color: var(--fk-yellow); font-weight: bold; }

        .status-badge {
            background: var(--fk-red);
            padding: 2px 10px;
            border-radius: 50px;
            font-size: 10px;
            text-transform: uppercase;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        /* Botão PIP Personalizado */
        .btn-pip {
            font-size: 0.75rem;
            color: var(--fk-yellow);
            border: 1px solid rgba(253, 185, 19, 0.3);
            padding: 4px 12px;
            border-radius: 20px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            background: transparent;
        }
        .btn-pip:hover {
            background: rgba(253, 185, 19, 0.1);
            color: white;
            border-color: white;
        }

        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="flex flex-col">

    <!-- Header -->
    <header class="container mx-auto px-4 py-8 flex flex-col lg:flex-row items-center justify-between gap-6">
        <!-- Logo -->
        <div class="logo-container cursor-pointer mb-2 lg:mb-0" onclick="showSection('live')">
            <img src="https://raw.githubusercontent.com/listamake/sitefkweb/main/logosite.png" 
                 alt="Fkids Logo" class="logo-main w-48 md:w-64">
        </div>

        <!-- Relógio (Ordem ajustada para mobile: Logo -> Relógio -> Menu) -->
        <div class="digital-clock-container font-brand order-2 lg:order-3 mb-4 lg:mb-0" title="Horário de Brasília">
            <div class="clock-time">
                <span id="clock-h">00</span><span class="blink-colon">:</span><span id="clock-m">00</span>
            </div>
            <div class="clock-seconds" id="clock-s">00</div>
        </div>

        <!-- Menu -->
        <nav class="flex flex-wrap justify-center gap-3 order-3 lg:order-2 w-full lg:w-auto">
            <button class="nav-btn font-brand active" id="btn-home" onclick="showSection('live')">
                <img src="https://raw.githubusercontent.com/listamake/sitefkweb/main/logosite.png" alt="Icon" class="brightness-0">
                Início
            </button>
            <button class="nav-btn font-brand" id="btn-prog" onclick="showSection('schedule')">
                <img src="https://raw.githubusercontent.com/listamake/sitefkweb/main/prog-icon.png" alt="Icon">
                Programação
            </button>
            <button class="nav-btn font-brand" onclick="window.open('https://www.jbox.com.br/2023/03/10/power-rangers-e-a-geracao-fox-kids-coluna-do-daileon-175/', '_blank')">
                <img src="https://raw.githubusercontent.com/listamake/sitefkweb/main/download-icon.png" alt="Icon">
                Downloads
            </button>
            <button class="nav-btn font-brand" onclick="window.open('https://www.facebook.com/groups/1745647432426092/', '_blank')">
                <img src="https://raw.githubusercontent.com/listamake/sitefkweb/main/serie-icon.png" alt="Icon">
                Séries
            </button>
        </nav>
    </header>

    <!-- Main -->
    <main class="container mx-auto px-4 flex-grow grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
        
        <div class="lg:col-span-2 space-y-6">
            
            <!-- Section: Live Player -->
            <div id="section-live" class="glass-card p-4 md:p-6 fade-in">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-brand text-xl text-yellow-400 flex items-center gap-2">
                        <span class="status-badge">Ao Vivo</span>
                        TRANSMISSÃO PRINCIPAL
                    </h2>
                    
                    <!-- Botão Picture-in-Picture -->
                    <button onclick="togglePiP()" class="btn-pip font-brand uppercase tracking-wider" title="Abrir Mini Player">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                        </svg>
                        Mini Player
                    </button>
                </div>
                
                <div class="player-wrapper">
                    <video id="my-video" class="video-js vjs-big-play-centered" controls preload="auto" poster="https://raw.githubusercontent.com/listamake/sitefkweb/main/logosite.png">
                        <source src="https://stmv2.srvif.com/emlsilva/emlsilva/playlist.m3u8" type="application/x-mpegURL">
                    </video>
                </div>
            </div>

            <!-- Section: Full Schedule (Com abas de dias) -->
            <div id="section-schedule" class="glass-card p-6 hidden fade-in">
                <div class="flex items-center justify-between border-b border-white/10 pb-4 mb-6">
                    <h2 class="font-brand text-2xl text-yellow-400 uppercase">Grade de Horários</h2>
                    <button onclick="showSection('live')" class="text-xs text-gray-400 hover:text-white uppercase tracking-widest">Voltar</button>
                </div>

                <!-- Abas de Dias -->
                <div class="flex flex-wrap gap-2 mb-8 justify-center lg:justify-start">
                    <div class="day-tab active font-brand" onclick="filterDay(this, 'seg')">SEG</div>
                    <div class="day-tab font-brand" onclick="filterDay(this, 'ter')">TER</div>
                    <div class="day-tab font-brand" onclick="filterDay(this, 'qua')">QUA</div>
                    <div class="day-tab font-brand" onclick="filterDay(this, 'qui')">QUI</div>
                    <div class="day-tab font-brand" onclick="filterDay(this, 'sex')">SEX</div>
                    <div class="day-tab font-brand" onclick="filterDay(this, 'sab')">SÁB</div>
                    <div class="day-tab font-brand" onclick="filterDay(this, 'dom')">DOM</div>
                </div>
                
                <div id="scheduleContainer" class="max-h-[600px] overflow-y-auto pr-2 custom-scrollbar">
                    <!-- Conteúdo dinâmico da programação -->
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="space-y-6">
            <div class="glass-card p-6 border-l-4 border-yellow-400">
                <h3 class="font-brand text-lg mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"/></svg>
                    ESTAMOS VENDO
                </h3>
                <ul id="epgList" class="space-y-1">
                    <div class="text-xs text-gray-500 italic">Conectando...</div>
                </ul>
            </div>

            <div class="glass-card p-6 bg-gradient-to-br from-blue-900/40 to-transparent">
                <h3 class="font-brand text-xs mb-3 text-yellow-400/80 uppercase">Dica do Fã</h3>
                <p class="text-sm leading-relaxed">
                    Você pode conferir a programação de toda a semana clicando no botão <strong>Programação</strong> acima!
                </p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-yellow-400 text-blue-900 mt-auto pt-12 pb-8 px-4" style="clip-path: polygon(0 15%, 100% 0, 100% 100%, 0% 100%);">
        <div class="container mx-auto text-center">
            <img src="https://raw.githubusercontent.com/listamake/sitefkweb/main/logosite.png" alt="Logo" class="w-32 mx-auto mb-4 brightness-0 opacity-80">
            <p class="font-brand text-sm">A Fkids é uma webtv feita de fãs para fãs!</p>
            <p class="text-xs mt-1 opacity-70">© Fkids - Nostalgia sem limites.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://vjs.zencdn.net/7.14.3/video.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/listamake/flashtools/script.js"></script>
    <script>
        const player = videojs('my-video');
        const desiredChannelId = "fkids.br";

        // --- FUNCIONALIDADE RELÓGIO DIGITAL ---
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            
            document.getElementById('clock-h').textContent = hours;
            document.getElementById('clock-m').textContent = minutes;
            document.getElementById('clock-s').textContent = seconds;
        }
        
        // Atualiza a cada segundo
        setInterval(updateClock, 1000);
        updateClock(); // Primeira chamada imediata
        // ----------------------------------------

        // --- FUNCIONALIDADE PICTURE-IN-PICTURE (PiP) ---
        async function togglePiP() {
            try {
                if (document.pictureInPictureElement) {
                    await document.exitPictureInPicture();
                } else {
                    const videoEl = player.tech().el();
                    if (videoEl !== document.pictureInPictureElement) {
                        await videoEl.requestPictureInPicture();
                    }
                }
            } catch (error) {
                console.error("Erro ao alternar Picture-in-Picture:", error);
                alert("Seu navegador pode não suportar este recurso ou o vídeo ainda não foi iniciado.");
            }
        }
        
        if (player.tech().el()) {
            player.tech().el().addEventListener('enterpictureinpicture', () => {
                console.log('Entrou no modo Mini Player');
            });
            player.tech().el().addEventListener('leavepictureinpicture', () => {
                console.log('Saiu do modo Mini Player');
            });
        }
        // --------------------------------------------------

        // Dados da Programação (Exemplo)
        const programsData = {
            seg: [
                {t: "00:00", n: "Madrugada Nostálgica"}, {t: "07:00", n: "O Fantástico Mundo de Bobby"}, 
                {t: "08:00", n: "Digimon Adventure"}, {t: "09:00", n: "Power Rangers"},
                {t: "12:00", n: "X-Men Evolution"}, {t: "18:00", n: "Homem-Aranha"}, {t: "22:00", n: "Cine Fox Kids"}
            ],
            ter: [{t: "00:00", n: "Maratona Terça"}, {t: "10:00", n: "Medabots"}, {t: "20:00", n: "Beyblade"}],
        };

        function filterDay(el, day) {
            document.querySelectorAll('.day-tab').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            renderSchedule(day);
        }

        function renderSchedule(day) {
            const container = document.getElementById('scheduleContainer');
            const list = programsData[day] || [{t: "--:--", n: "Programação em breve"}];
            
            container.innerHTML = list.map(p => `
                <div class="schedule-row fade-in">
                    <span class="schedule-time">${p.t}</span>
                    <span class="schedule-name font-bold text-gray-200">${p.n}</span>
                </div>
            `).join('');
        }

        function showSection(section) {
            const live = document.getElementById('section-live');
            const schedule = document.getElementById('section-schedule');
            const btnProg = document.getElementById('btn-prog');
            const btnHome = document.getElementById('btn-home');

            if (section === 'schedule') {
                live.classList.add('hidden');
                schedule.classList.remove('hidden');
                btnProg.classList.add('active');
                btnHome.classList.remove('active');
                renderSchedule('seg'); // Inicia na segunda
            } else {
                schedule.classList.add('hidden');
                live.classList.remove('hidden');
                btnHome.classList.add('active');
                btnProg.classList.remove('active');
            }
        }

        function filterProgramsByChannel(programElements) {
            const filteredPrograms = [];
            for (const programElement of programElements) {
                if (programElement.getAttribute("channel") === desiredChannelId) {
                    filteredPrograms.push(programElement);
                }
            }
            return filteredPrograms;
        }

        // Efeito Tilt
        const logo = document.querySelector('.logo-main');
        document.addEventListener('mousemove', (e) => {
            if (window.innerWidth < 1024) return;
            const x = (window.innerWidth / 2 - e.pageX) / 40;
            const y = (window.innerHeight / 2 - e.pageY) / 40;
            logo.style.transform = `rotateY(${-x}deg) rotateX(${y}deg)`;
        });

        window.onload = () => { renderSchedule('seg'); };
    </script>
</body>
</html>